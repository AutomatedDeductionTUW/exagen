more sophisticated: full random generation, filter out "too hard"/"too easy" instances.
Note that we don't need very efficient implementation of filters since the instances are very small.
so we can use naive satisfiability tests or model counting.

\subsection{Boolean Satisfiability (SAT)}

\begin{mdframed}
    \begin{example}[SAT]
        Consider the formula:
        \[
            % Random number generator seed: Just 123
            % Index: 36
            % Satisfiable? True
            % Valid? False
            % Polarities: fromList [(p,Both),(q,Both),(r,Pos)]
            % Models: [{¬p,q,r}, {¬p,¬q,r}, {¬p,¬q,¬r}]
            ( r \land \lnot ( q \rightarrow p ) ) \lor ( q \leftrightarrow \lnot ( p \rightarrow q ) )
        \]
        \begin{enumerate}[(a)]
            \item
                Which atoms are pure in the above formula?
            \item\label{subtask:sat-cnf}
                Compute a clausal normal form $C$ of the above formula by
                applying the CNF transformation algorithm with naming and
                optimization based on polarities of subformulas;
            \item
                Decide the satisfiability of the computed CNF formula $C$
                by applying the DPLL method to $C$. If $C$ is
                satisfiable, give an interpretation which
                satisfies it.
                \qed
        \end{enumerate}
    \end{example}
\end{mdframed}
\todo{we could also give some more examples (5?) if we have space (just the formula)}


Simply generating propositional formulas fully randomly would lead
to a huge variety of formulas,
spanning both formulas for which the above questions are trivial to answer
and others where much more work is required.
This is obviously undesirable in an exam setting,
where the tasks should ultimately be challenging, but still solvable by hand.
Furthermore,
the variation in difficulty between different exams should be kept as small as possible,
to make the setting as fair to the examinees as possible.

To this end,
we identified several characteristics that the exam formulas should exhibit,
and filtered the generated formulas by these.

The criteria are the following:
% Size: 7 connectives
% [ numAtoms fm == 3
% , -- there is at least one atom with pure polarity
%   hasAtomPolarity Neg fm || hasAtomPolarity Pos fm
% , not (anySubformula isNestedNot fm)
% , -- at least one but at most two equivalences
%   let n = countSubformulas isIff fm
%   in 1 <= n && n <= 2
% , anySubformula isImp fm
% , anySubformula isNot fm
% , anySubformula isAnd fm || anySubformula isOr fm
% , not (anySubformula isTrivialBinaryConnective fm)
% , hasVarietyInDefinitionalNF fm
% , length (models fm) <= 6
% , nestedLatexParens fm < 3
% ]
\begin{enumerate}
    \item
        The formula contains exactly seven connectives.
    \item
        The formula contains exactly three different atomic propositions
        (but each of these may appear multiple times).
    \item\label{item:polarity}
        There exists at least one atom that appears with pure polarity
        (i.e., either only in positive position or only in negative position).
    \item
        There is no subformula for the form $\lnot \lnot \varphi$ for any formula $\varphi$.
    \item
        The connective ``$\leftrightarrow$'' appears at least once but at most twice.
    \item
        The connectives ``$\rightarrow$'' and ``$\lnot$'' appear at least once.
    \item
        At least one of the connectives ``$\land$'' or ``$\lor$'' appears in the formula.
    \item
        If a binary connective has a literal as argument,
        the other argument cannot also be a literal containing the same atomic proposition.
        % No binary connective has two literals that contain the same atomic proposition.
        % There is no binary connective that 
        For example, this excludes subformulas such as $p \land \lnot p$ and $p \lor p$,
        but not $p \rightarrow q$.
    \item
        The polarity-optimized clausal normal form
        (also known as Tseitin transformation\todo{cite tseitin paper?})
        to be found in subtask~\ref{subtask:sat-cnf} results in a set of definitionsm
        each of which is of the form
        $n \rightarrow \varphi$,
        $n \leftarrow \varphi$, or
        $n \leftrightarrow \varphi$,
        where $n$ is a fresh atomic proposition and $\varphi$ is a formula.
        To ensure this CNF is non-trivial,
        we force the formula such that at least two of these definition types appear in the CNF.
        (this basically means there must be two non-atomic subformulas of different polarity.)
    \item
        The formula has at most $6$ models.
        Note that there are $2^3 = 8$ different interpretations of our formula,
        so this means the formula is not valid.
        \todo{the value of this is restriction isn't clear to me anymore… I wanted to control DPLL branching somewhat but now I don't think it does anything for that.}
    \item
        To reduce difficulty introduced by visual complexity,
        the \LaTeX{} rendering of the formula should have a parenthesis nesting level of at most two.
\end{enumerate}

Issues that we encountered with too strict restrictions:
\begin{itemize}
    \item
        the sample space might be empty.
        may lead to the generator getting ``stuck'' for a minute until the user kills it.

        For example, a note about restriction~\ref{item:polarity}:
        with all the other restrictions,
        it is impossible to get a formula that contains atomic proposition
        of purely positive and purely negative polarity at the same time.

    \item
        Less drastic but perhaps more problematic:
        the sample space may be restricted too much,
        leading to the generation of boring and similar formulas.

        happens, for example, if we restrict the number of models to exactly one,
        or to no model.

        there simply aren't that many ways to rule out 8 interpretations
        using only 7 connectives.
\end{itemize}


% The random generator works recursively.
% The procedure is as follows:
% \begin{enumerate}
%     \item
%         Randomly choose a connective.
%     \item
%         Generate subformulas recursively.
% \end{enumerate}





\subsection{Non-Ground Superposition and Redundancy}

todo


